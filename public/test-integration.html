
<!DOCTYPE html>
<html>
<head>
    <title>Little Forest Integration Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Little Forest Integration Test</h1>
        <div id="products-container" class="row">
            <!-- Products will load here -->
        </div>
        <div id="status" class="mt-3"></div>
    </div>

    <script>
        // Test the integration
        async function testIntegration() {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = '<div class="alert alert-info">Testing integration...</div>';

            try {
                const response = await fetch('https://litteforest.vercel.app/api/products');
                const data = await response.json();

                if (data.success) {
                    statusDiv.innerHTML = `
                        <div class="alert alert-success">
                            ✅ Integration working! Found ${data.products.length} products
                        </div>
                    `;
                    
                    // Display products
                    const container = document.getElementById('products-container');
                    data.products.forEach(product => {
                        const hasImage = product.image_url && product.image_url.trim() !== '';
                        container.innerHTML += `
                            <div class="col-md-4 mb-3">
                                <div class="card">
                                    ${hasImage 
                                        ? `<img src="${product.image_url}" class="card-img-top" style="height: 200px; object-fit: cover;">` 
                                        : `<div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="height: 200px;">No Image Available</div>`
                                    }
                                    <div class="card-body">
                                        <h5>${product.plant_name}</h5>
                                        <p>${product.description || 'No description'}</p>
                                        <p><strong>Ksh ${product.price}</strong></p>
                                        <span class="badge bg-${product.availability_status === 'Available' ? 'success' : product.availability_status === 'Limited' ? 'warning' : 'danger'}">${product.availability_status}</span>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                } else {
                    statusDiv.innerHTML = `
                        <div class="alert alert-danger">
                            ❌ API Error: ${data.error}
                        </div>
                    `;
                }
            } catch (error) {
                statusDiv.innerHTML = `
                    <div class="alert alert-danger">
                        ❌ Connection Error: ${error.message}
                    </div>
                `;
            }
        }

        // Run test when page loads
        testIntegration();
    </script>
</body>
</html>
